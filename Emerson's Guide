//XA
LINK 800
COPY M X

TEST X = 0
TJMP MOVEDIAG
TEST X < 0
TJMP MOVEEAST

MARK MOVEWEST
SUBI X 1 X
LINK 801
TEST X = 0
FJMP MOVEWEST
JUMP MOVEDIAG

MARK MOVEEAST
ADDI X 1 X
LINK 803
TEST X = 0
FJMP MOVEEAST

MARK MOVEDIAG
COPY M X
TEST X = 0
TJMP READFILE
TEST X > 0
TJMP MOVENORTH

MARK MOVESOUTH
ADDI X 1 X
LINK 802
TEST X = 0
FJMP MOVESOUTH
JUMP READFILE

MARK MOVENORTH
SUBI X 1 X
LINK 800
TEST X = 0
FJMP MOVENORTH

MARK READFILE
GRAB 200
COPY M X
MARK SEARCH
TEST X = F
FJMP SEARCH

COPY F X
@REP 4
COPY X F
@END

//XB
GRAB 300
SEEK 1
COPY F M
COPY F M
SEEK -3
COPY F M
